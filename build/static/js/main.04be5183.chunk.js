(this["webpackJsonpwallet-frontend"]=this["webpackJsonpwallet-frontend"]||[]).push([[0],{216:function(e,t,n){e.exports=n(519)},221:function(e,t,n){},223:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},224:function(e,t,n){},236:function(e,t){},245:function(e,t){},262:function(e,t){},264:function(e,t){},279:function(e,t){},280:function(e,t){},282:function(e,t){},283:function(e,t){},359:function(e,t){},361:function(e,t){},370:function(e,t){},372:function(e,t){},397:function(e,t){},399:function(e,t){},405:function(e,t){},406:function(e,t){},409:function(e,t){},425:function(e,t){},428:function(e,t){},433:function(e,t){},444:function(e,t){},447:function(e,t){},519:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(213),s=n.n(c),o=(n(221),n(11)),l=n.n(o),i=n(21),u=n(2),m=n(3),d=n(7),h=n(6),p=(n(223),n(224),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).render=function(){return r.a.createElement("div",{id:"profile",className:"container border"},r.a.createElement("p",null,this.props.address),r.a.createElement("p",null,r.a.createElement("b",null,"Balance")," : ",this.state.balance," ",r.a.createElement("s",null)," ethers"))},a.state={balance:0},a._isMounted=!1,a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.web3.eth.getBalance(this.props.address);case 3:return t=e.sent,e.next=6,this.props.web3.utils.fromWei(t,"ether");case 6:t=e.sent,this._isMounted&&this.setState({balance:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}}]),n}(a.Component)),f=n(78),v=n.n(f),b=function(){return new Promise((function(e,t){window.addEventListener("load",Object(i.a)(l.a.mark((function n(){var a,r,c,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.ethereum){n.next=14;break}return console.log("Modern dapp broser detected!"),a=new v.a(window.ethereum),n.prev=3,n.next=6,window.ethereum.enable();case 6:e(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),t(n.t0);case 12:n.next=15;break;case 14:window.web3?(console.log("Legacy dapp browser, injected web3 detected!"),r=window.web3,e(r)):(console.log("No web3 provider detected, connecting to local web3 provider!"),c=new v.a.providers.HttpProvider("http://127.0.0.1:8545"),s=new v.a(c),e(s));case 15:case"end":return n.stop()}}),n,null,[[3,9]])}))))}))},E=n(28),w=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(u.a)(this,n),a=t.call(this,e);var r=new Date(a.props.tx.date_of_transaction);return a.state={from:null,to:null,value:null,gasUsed:null,date:r},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.web3.eth.getTransaction(this.props.tx.txHash);case 2:(t=e.sent)&&this.setState({from:t.from,to:t.to,value:t.value,gasUsed:t.gas});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,r.a.createElement(E.b,{to:function(){return"/transaction/"+e.props.tx.txHash}},this.props.tx.txHash),r.a.createElement("br",null),r.a.createElement("b",null,"(",this.state.date.toString(),")")),r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"container col"},r.a.createElement("p",null,r.a.createElement("b",null,"From - "),r.a.createElement("a",{href:"/profile/"+this.state.from},this.state.from))),r.a.createElement("div",{className:"container col"},r.a.createElement("p",null,r.a.createElement("b",null,"To - "),r.a.createElement("a",{href:"/profile/"+this.state.to},this.state.to)))),r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"container col"},r.a.createElement("p",null,r.a.createElement("b",null,"Value - ")," ",this.state.value," ethers ")),r.a.createElement("div",{className:"container col"},r.a.createElement("p",null,r.a.createElement("b",null,"Gas Used - ")," ",this.state.gasUsed," ethers"))))}}]),n}(a.Component),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props.list.map((function(t,n){return r.a.createElement("div",{className:"container row",key:"tx-"+n},r.a.createElement("div",{className:"container col-1 border"},n+1),r.a.createElement("div",{className:"container col border"},r.a.createElement(w,{tx:t,web3:e.props.web3})))}));return 0===t.length&&(t=r.a.createElement("p",null,"No transactions found!")),r.a.createElement("div",{className:"container border"},t)}}]),n}(a.Component),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,r.a.createElement(E.b,{to:function(){return"/profile/"+e.props.contact.contact_address}},this.props.contact.contact_name)),r.a.createElement("p",null,this.props.contact.contact_address))}}]),n}(a.Component),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.list.map((function(e,t){return r.a.createElement("div",{className:"container row border",key:"contact_"+t},r.a.createElement("div",{className:"container col-1 border-right"},t),r.a.createElement("div",{className:"container col"},r.a.createElement(y,{contact:e})))}));return 0==e.length&&(e=r.a.createElement("p",null,"No saved contact found!")),r.a.createElement("div",null,e)}}]),n}(a.Component),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleAddressChange=function(e){e.preventDefault(),a.setState({addr:e.target.value})},a.goToProfile=function(e){e.preventDefault(),window.location.href="profile/"+a.state.addr},a.state={addr:""},a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("label",{name:"searchAddress"},"Address"),r.a.createElement("input",{id:"searchAddress",type:"text",onChange:this.handleAddressChange}),r.a.createElement("button",{type:"submit",onClick:this.goToProfile},"Go"))}}]),n}(a.Component),k=n(35),x=n.n(k),N=(new Date("2019-05-13"),new Date("2019-07-17"),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={providedAddress:0,balance:0,contacts:[],transactions:[],errors:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.web3.eth.getAccounts();case 3:t=(t=e.sent)[0],this.setState({providedAddress:t}),x.a.get("http://localhost:8000/api/contact/",{params:{owner:t}}).then((function(e){200===e.status?n.setState({contacts:e.data}):alert("Unknown status while fetching contacts\n"+e.statusText)}),(function(e){alert("An error occured while fetching contacts!\n"+e)})),x.a.get("http://localhost:8000/api/tx/",{params:{owner:t}}).then((function(e){200===e.status?n.setState({transactions:e.data}):alert("Unknown status while fetching transactions\n"+e.statusText)}),(function(e){alert("An error occured while fetching transactions!\n"+e)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Loading address!");case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{id:"My Page",className:"container"},r.a.createElement(O,null),r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"container col-5"},r.a.createElement("h1",null,"My Profile"),r.a.createElement(p,{address:this.state.providedAddress,web3:this.props.web3})),r.a.createElement("div",{className:"container col"},r.a.createElement("h1",null,"My Contacts"),r.a.createElement(j,{list:this.state.contacts}))),r.a.createElement("br",null),r.a.createElement("div",{className:"container-fluid row"},r.a.createElement("div",{className:"container col"},r.a.createElement("h1",null,"My Transactions"),r.a.createElement(g,{list:this.state.transactions,web3:this.props.web3}))))}}]),n}(a.Component)),C=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleAmountChange=function(e){e.preventDefault(),a.setState({amount:e.target.value})},a.handleUnitChange=function(e){e.preventDefault();var t=e.target.value;a.setState({unit:t})},a.handlePayment=function(){var e=a.state.amount;a.props.paymentMethod(e)},a.state={amount:0,unit:"eth"},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container border"},r.a.createElement("input",{type:"text",id:"amount",name:"amount",onChange:this.handleAmountChange,value:this.state.amount}),r.a.createElement("select",{id:"unit",name:"unit",onChange:this.handleUnitChange},r.a.createElement("option",{value:"eth"},"Ether"),r.a.createElement("option",{value:"wei"},"Wei")),r.a.createElement("button",{type:"submit",onClick:function(){return e.props.paymentMethod(e.state.amount,e.state.unit)}},"Pay"))}}]),n}(a.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).createContact=function(){var e=prompt(),t={owner:a.props.myAddress,contact_address:a.props.currentAddress,contact_name:e};console.log(t),x.a.post("http://localhost:8000/api/contact/",{data:t}).then((function(e){console.log(e)}),(function(e){alert("An error occured while saving contact!\n"+e)}))},a.state={isContact:!1},a}return Object(m.a)(n,[{key:"showContact",value:function(){return this.props.isContact?null:r.a.createElement("button",{type:"submit",onClick:this.createContact},"Save contact")}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},this.showContact())}}]),n}(a.Component),M=(new Date("2019-05-13"),new Date("2019-07-17"),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).makePayment=function(e,t){try{var n={from:a.state.myAddress,to:a.state.currentAddress,value:"eth"===t?a.props.web3.utils.toWei(e,"ether"):e};console.log(n),a.props.web3.eth.sendTransaction(n).then((function(e){console.log("Transaction Successful!"),console.log(e),x.a.post("http://localhost:8000/api/tx/",{data:{owner:a.state.myAddress,txHash:e.transactionHash}}).then((function(e){console.log("Transaction saved - ",e)}),(function(e){console.error(e)}))}),(function(e){console.error(e)})).finally((function(){console.log("Transaction complete!")}))}catch(r){console.error(r)}},a.state={myAddress:null,currentAddress:a.props.match.params.address,currentBalance:0,transactions:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.web3.eth.getAccounts();case 3:return t=e.sent[0],e.next=6,this.props.web3.eth.getBalance(this.state.currentAddress);case 6:n=e.sent,n=this.props.web3.utils.fromWei(n,"ether"),this.setState({myAddress:t,currentBalance:n}),x.a.get("http://localhost:8000/api/tx/",{params:{owner:this.state.currentAddress}}).then((function(e){200==e.status?a.setState({transactions:e.data}):alert("Unkown response while fetching transactions!\n"+e.statusText)}),(function(e){alert("Error while fetching transactions!\n"+e)})),x.a.get("http://localhost:8000/api/iscontact/",{params:{owner:t,contact_address:this.state.currentAddress}}).then((function(e){200==e.status?(console.log("Is Contact? - ",e.data),a.setState({isContact:e.data})):alert("Unknown response while fetching contact relation!\n",e.statusText)}),(function(e){alert("Error while fetching contact relation!\n"+e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{id:"ProfilePage"},r.a.createElement("div",{className:"navbar navbar-expand-lg bg-light navbar-light",id:"navbar"},r.a.createElement("p",{className:"navbar-brand"},"EthContact"),r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(E.b,{className:"nav-link active",to:"/"},"Home"))),r.a.createElement("div",{id:"content"},r.a.createElement("h1",null," Profile Page "),r.a.createElement(p,{address:this.state.currentAddress,web3:this.props.web3}),r.a.createElement(A,{myAddress:this.state.myAddress,currentAddress:this.state.currentAddress,isContact:this.state.isContact}),r.a.createElement(C,{paymentMethod:this.makePayment,valueConvertor:this.props.web3}),r.a.createElement(g,{list:this.state.transactions,web3:this.props.web3})))}}]),n}(a.Component)),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[],e.prev=1,e.next=4,this.props.web3.eth.getTransaction(this.props.match.params.txHash);case 4:t=e.sent,this.setState(t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"TransactionPage"},r.a.createElement("div",{className:"navbar navbar-expand-lg bg-light navbar-light",id:"navbar"},r.a.createElement("p",{className:"navbar-brand"},"EthContact"),r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(E.b,{className:"nav-link active",to:"/"},"Home"))),r.a.createElement("h2",null," Transaction - ",this.props.match.params.txHash," "),r.a.createElement("div",{id:"result"},r.a.createElement("table",{id:"resList",className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Parameter"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Transction Hash"),r.a.createElement("td",null,this.state.hash)),r.a.createElement("tr",null,r.a.createElement("td",null,"From"),r.a.createElement("td",null,r.a.createElement(E.b,{to:function(){return"/profile/"+e.state.from}},this.state.from))),r.a.createElement("tr",null,r.a.createElement("td",null,"To"),r.a.createElement("td",null,r.a.createElement(E.b,{to:function(){return"/profile/"+e.state.to}},this.state.to))),r.a.createElement("tr",null,r.a.createElement("td",null,"Block Hash"),r.a.createElement("td",null,this.state.blockHash)),r.a.createElement("tr",null,r.a.createElement("td",null,"Block Number"),r.a.createElement("td",null,this.state.blockNumber)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gas"),r.a.createElement("td",null,this.state.gas)),r.a.createElement("tr",null,r.a.createElement("td",null,"Gas Price"),r.a.createElement("td",null,this.state.gasPrice)),r.a.createElement("tr",null,r.a.createElement("td",null,"Nonce"),r.a.createElement("td",null,this.state.nonce)),r.a.createElement("tr",null,r.a.createElement("td",null,"Value"),r.a.createElement("td",null,this.state.value))))))}}]),n}(a.Component),T=n(15),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={web3:null},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,this.setState({web3:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/home",component:function(){return r.a.createElement(N,{web3:e.state.web3})},name:"homepage"}),r.a.createElement(T.b,{path:"/profile/:address",component:function(t){return r.a.createElement(M,Object.assign({web3:e.state.web3},t))},name:"profilepage"}),r.a.createElement(T.b,{path:"/transaction/:txHash",exact:!0,component:function(t){return r.a.createElement(P,Object.assign({web3:e.state.web3},t))},name:"profilepage"}),r.a.createElement(T.b,{from:"/"},r.a.createElement(T.a,{from:"",to:"/home"})))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[216,1,2]]]);
//# sourceMappingURL=main.04be5183.chunk.js.map